<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .fingerprint-icon {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            animation: pulse 2s infinite;
        }
        .fingerprint-icon svg {
            width: 120px;
            height: 120px;
            fill: white;
            opacity: 0.9;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5); }
        }
        .attendance-type-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            margin: 10px 0;
        }
        .check-in-badge {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
        }
        .check-out-badge {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            /* Header Actions */
            .header-actions {
                flex-direction: column !important;
                width: 100% !important;
                gap: 8px !important;
            }
            
            .header-actions button {
                width: 100% !important;
                padding: 12px !important;
                font-size: 14px !important;
            }

            /* Page Header */
            .page-header {
                flex-direction: column !important;
                align-items: stretch !important;
                padding: 15px !important;
            }

            .page-header h1 {
                font-size: 20px !important;
                margin-bottom: 15px !important;
            }

            /* Tabs */
            .tab-content {
                overflow-x: auto;
            }

            .tab-content > div {
                padding: 15px !important;
            }

            /* Tabs Buttons */
            div[style*="background: white"][style*="padding: 10px"] {
                display: flex !important;
                flex-wrap: wrap !important;
                gap: 5px !important;
                padding: 10px 5px !important;
            }

            div[style*="background: white"][style*="padding: 10px"] button,
            div[style*="background: white"] button.btn-secondary {
                font-size: 11px !important;
                padding: 8px 10px !important;
                margin: 2px !important;
                white-space: nowrap;
                flex: 1 1 auto;
                min-width: 80px;
            }

            /* Stats Cards Grid */
            .stats-grid,
            div[style*="grid-template-columns: repeat(auto-fit"] {
                grid-template-columns: 1fr !important;
                gap: 10px !important;
            }

            /* Dashboard Stats */
            #statTotalEmployees,
            #statPresentToday,
            #statOnLeave,
            #statAbsentToday {
                font-size: 24px !important;
            }

            /* Charts Container */
            div[style*="grid-template-columns: repeat(auto-fit, minmax(400px"] {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }

            div[style*="background: #f8f9fa"] {
                padding: 15px !important;
            }

            div[style*="background: #f8f9fa"] h3 {
                font-size: 16px !important;
                margin-bottom: 10px !important;
            }

            /* Tables */
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .data-table {
                min-width: 800px;
                font-size: 12px;
            }

            .data-table thead th {
                padding: 10px 8px !important;
                font-size: 11px !important;
            }

            .data-table tbody td {
                padding: 10px 8px !important;
                font-size: 12px !important;
            }

            .data-table tbody td button {
                padding: 6px 10px !important;
                font-size: 10px !important;
                margin: 2px !important;
            }

            /* Search Input */
            input[type="text"][id*="Search"],
            input[type="text"][id*="search"] {
                width: 100% !important;
                margin-top: 10px !important;
            }

            /* Modals */
            .modal-content {
                width: 95% !important;
                max-width: 95% !important;
                margin: 10px auto !important;
                padding: 20px 15px !important;
                max-height: 90vh;
                overflow-y: auto;
            }

            .modal-content h2 {
                font-size: 18px !important;
            }

            /* Fingerprint Icon in Modal */
            .fingerprint-icon {
                width: 150px !important;
                height: 150px !important;
                margin: 15px auto !important;
            }

            .fingerprint-icon svg {
                width: 90px !important;
                height: 90px !important;
            }

            /* Form Groups */
            .form-group {
                margin-bottom: 15px !important;
            }

            .form-group label {
                font-size: 14px !important;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 12px !important;
                font-size: 14px !important;
            }

            /* Form Row */
            .form-row {
                flex-direction: column !important;
                gap: 15px !important;
            }

            .form-row .form-group {
                width: 100% !important;
            }

            /* Form Actions */
            .form-actions {
                flex-direction: column !important;
                gap: 10px !important;
            }

            .form-actions button {
                width: 100% !important;
                padding: 12px !important;
            }

            /* Input Fields in Modals */
            #checkInInput,
            #checkOutInput {
                font-size: 16px !important;
                padding: 12px !important;
            }

            /* Status Messages */
            #checkInStatus,
            #checkOutStatus {
                font-size: 13px !important;
                padding: 12px !important;
            }

            /* Sidebar - Hide on mobile (already handled by mobile-menu.js) */
            .sidebar {
                transform: translateX(-100%);
            }

            /* Container padding */
            .container {
                padding: 10px !important;
            }

            /* Charts - Make responsive */
            canvas {
                max-width: 100% !important;
                height: 250px !important;
            }

            /* Dashboard Tab Content */
            #dashboardTab div[style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
            }

            #dashboardTab div[style*="display: grid"] {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }

            /* Dashboard Cards */
            div[style*="background: linear-gradient(135deg"] {
                padding: 15px !important;
            }

            div[style*="background: linear-gradient(135deg"] > div:first-child {
                font-size: 12px !important;
            }

            /* Employee Table Actions */
            .data-table tbody td:last-child {
                white-space: nowrap;
            }

            .data-table tbody td:last-child button {
                display: inline-block;
                margin: 2px;
            }

            /* Search and Filter Inputs */
            input[type="text"][id*="employeeSearch"],
            select[id*="Filter"],
            select[id*="filter"],
            input[type="date"] {
                width: 100% !important;
                margin: 5px 0 !important;
            }

            /* Employee List Header */
            div[style*="display: flex"][style*="justify-content: space-between"] {
                flex-direction: column !important;
                align-items: stretch !important;
                gap: 10px !important;
            }

            div[style*="display: flex"][style*="justify-content: space-between"] h2 {
                margin: 0 !important;
                font-size: 18px !important;
            }
        }

        @media (max-width: 480px) {
            /* Extra small devices */
            .page-header h1 {
                font-size: 18px !important;
            }

            .modal-content {
                padding: 15px 10px !important;
            }

            .fingerprint-icon {
                width: 120px !important;
                height: 120px !important;
            }

            .fingerprint-icon svg {
                width: 70px !important;
                height: 70px !important;
            }

            .data-table {
                min-width: 700px;
                font-size: 11px;
            }

            .data-table thead th {
                padding: 8px 6px !important;
                font-size: 10px !important;
            }

            .data-table tbody td {
                padding: 8px 6px !important;
                font-size: 11px !important;
            }

            #checkInInput,
            #checkOutInput {
                font-size: 14px !important;
                letter-spacing: 1px !important;
            }
        }

        /* Landscape mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .modal-content {
                max-height: 85vh;
            }

            .fingerprint-icon {
                width: 100px !important;
                height: 100px !important;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">Order Management</div>
        <div class="nav-right">
            <span id="userInfo"></span>
            <button onclick="logout()" class="btn-logout">Logout</button>
        </div>
    </nav>

    <div class="main-wrapper">
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="dashboard.html">üìä Dashboard</a></li>
                <li><a href="orders.html">üì¶ Orders</a></li>
                <li><a href="products.html">üõçÔ∏è Products</a></li>
                <li><a href="billing.html">üí∞ Billing</a></li>
                <li><a href="bills.html">üìÑ Bills History</a></li>
                <li><a href="dispatched.html">üì§ Dispatched</a></li>
                <li><a href="employees.html" class="active">üë• Employee Management</a></li>
                <li><a href="automation.html">‚ö° Automation</a></li>
                <li><a href="return-scan.html">üì∑ Return Scan</a></li>
                <li><a href="backup.html">üíæ Backup & Restore</a></li>
                <li><a href="sellers.html" id="sellersLink" style="display: none;">üë• Sellers</a></li>
            </ul>
        </aside>

        <div class="container">
            <div class="page-header">
                <h1 style="color: #ff8c00;">üë• Employee Management</h1>
                <div class="header-actions" style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                    <button onclick="openAddEmployeeModal()" class="btn-primary">‚ûï Add Employee</button>
                    <button onclick="openCheckInModal()" class="btn-secondary" style="background: linear-gradient(135deg, #4caf50 0%, #45a049 100%); color: white; border: none; font-weight: 600;">‚úÖ Check-In</button>
                    <button onclick="openCheckOutModal()" class="btn-secondary" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); color: white; border: none; font-weight: 600;">üö™ Check-Out</button>
                    <button onclick="openLeaveModal()" class="btn-secondary">üèñÔ∏è Apply Leave</button>
                    <button onclick="openShortLeaveModal()" class="btn-secondary">‚è∞ Short Leave</button>
                </div>
            </div>

            <!-- Tabs -->
            <div style="background: white; padding: 10px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <button onclick="showTab('dashboard')" id="tabDashboard" class="btn-secondary" style="margin-right: 10px; background: #e0e0e0; color: #000;">üìä Dashboard</button>
                <button onclick="showTab('employees')" id="tabEmployees" class="btn-secondary" style="margin-right: 10px; background: #667eea; color: white; border-color: #667eea;">Employees</button>
                <button onclick="showTab('attendance')" id="tabAttendance" class="btn-secondary" style="margin-right: 10px; background: #e0e0e0; color: #000;">Attendance</button>
                <button onclick="showTab('leaves')" id="tabLeaves" class="btn-secondary" style="margin-right: 10px; background: #e0e0e0; color: #000;">Leaves</button>
                <button onclick="showTab('short-leaves')" id="tabShortLeaves" class="btn-secondary" style="background: #e0e0e0; color: #000;">Short Leaves</button>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboardTab" class="tab-content" style="display: none;">
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <h2 style="margin: 0 0 20px 0; color: #333;">Employee Statistics Dashboard</h2>
                    
                    <!-- Stats Cards -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 10px; color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">Total Employees</div>
                            <div style="font-size: 32px; font-weight: 700;" id="statTotalEmployees">0</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #4caf50 0%, #45a049 100%); padding: 20px; border-radius: 10px; color: white; box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);">
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">Present Today</div>
                            <div style="font-size: 32px; font-weight: 700;" id="statPresentToday">0</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); padding: 20px; border-radius: 10px; color: white; box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);">
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">On Leave</div>
                            <div style="font-size: 32px; font-weight: 700;" id="statOnLeave">0</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); padding: 20px; border-radius: 10px; color: white; box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);">
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">Absent Today</div>
                            <div style="font-size: 32px; font-weight: 700;" id="statAbsentToday">0</div>
                        </div>
                    </div>

                    <!-- Charts Grid -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h3 style="margin: 0 0 15px 0; color: #333;">Attendance Trend (Last 7 Days)</h3>
                            <canvas id="attendanceTrendChart"></canvas>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h3 style="margin: 0 0 15px 0; color: #333;">Leave Status Distribution</h3>
                            <canvas id="leaveStatusChart"></canvas>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h3 style="margin: 0 0 15px 0; color: #333;">Monthly Attendance</h3>
                            <canvas id="monthlyAttendanceChart"></canvas>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h3 style="margin: 0 0 15px 0; color: #333;">Department Wise Attendance</h3>
                            <canvas id="departmentAttendanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Employees Tab -->
            <div id="employeesTab" class="tab-content">
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; color: #333;">Employees List</h2>
                        <input type="text" id="employeeSearch" placeholder="Search employees..." 
                               style="padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0; width: 300px;"
                               onkeyup="searchEmployees()">
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Employee ID</th>
                                    <th>Name</th>
                                    <th>Phone</th>
                                    <th>Designation</th>
                                    <th>Department</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="employeesTableBody">
                                <tr><td colspan="7" class="loading">Loading employees...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Attendance Tab -->
            <div id="attendanceTab" class="tab-content" style="display: none;">
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; color: #333;">Attendance Records</h2>
                        <div style="display: flex; gap: 10px;">
                            <input type="date" id="attendanceDateFilter" onchange="loadAttendance()" 
                                   style="padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;">
                            <select id="attendanceEmployeeFilter" onchange="loadAttendance()" 
                                    style="padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;">
                                <option value="">All Employees</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Employee ID</th>
                                    <th>Name</th>
                                    <th>Check In</th>
                                    <th>Check Out</th>
                                    <th>Total Hours</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="attendanceTableBody">
                                <tr><td colspan="8" class="loading">Loading attendance...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Leaves Tab -->
            <div id="leavesTab" class="tab-content" style="display: none;">
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; color: #333;">Leave Records</h2>
                        <div style="display: flex; gap: 10px;">
                            <select id="leaveStatusFilter" onchange="loadLeaves()" 
                                    style="padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <select id="leaveEmployeeFilter" onchange="loadLeaves()" 
                                    style="padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;">
                                <option value="">All Employees</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Employee ID</th>
                                    <th>Name</th>
                                    <th>Leave Type</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Days</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="leavesTableBody">
                                <tr><td colspan="8" class="loading">Loading leaves...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Short Leaves Tab -->
            <div id="shortLeavesTab" class="tab-content" style="display: none;">
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; color: #333;">Short Leave Records</h2>
                        <div style="display: flex; gap: 10px;">
                            <input type="date" id="shortLeaveDateFilter" onchange="loadShortLeaves()" 
                                   style="padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;">
                            <select id="shortLeaveStatusFilter" onchange="loadShortLeaves()" 
                                    style="padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Employee ID</th>
                                    <th>Name</th>
                                    <th>Leave Time</th>
                                    <th>Return Time</th>
                                    <th>Duration</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="shortLeavesTableBody">
                                <tr><td colspan="8" class="loading">Loading short leaves...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Employee Modal -->
    <div id="employeeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEmployeeModal()">&times;</span>
            <h2 id="employeeModalTitle" style="color: #ff8c00;">Add Employee</h2>
            <form id="employeeForm">
                <input type="hidden" id="employeeId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Employee ID *</label>
                        <input type="text" id="employeeIdInput" required>
                    </div>
                    <div class="form-group">
                        <label>Name *</label>
                        <input type="text" id="employeeName" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="text" id="employeePhone">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="employeeEmail">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Designation</label>
                        <input type="text" id="employeeDesignation">
                    </div>
                    <div class="form-group">
                        <label>Department</label>
                        <input type="text" id="employeeDepartment">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Salary</label>
                        <input type="number" step="0.01" id="employeeSalary">
                    </div>
                    <div class="form-group">
                        <label>Join Date</label>
                        <input type="date" id="employeeJoinDate">
                    </div>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="employeeStatus">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save</button>
                    <button type="button" onclick="closeEmployeeModal()" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Fingerprint Registration Modal -->
    <div id="fingerprintModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeFingerprintModal()">&times;</span>
            <h2 style="color: #ff8c00;">Register Fingerprint</h2>
            <div class="form-group">
                <label>Employee ID</label>
                <input type="text" id="fingerprintEmployeeId" readonly>
            </div>
            <div class="form-group">
                <label>Employee Name</label>
                <input type="text" id="fingerprintEmployeeName" readonly>
            </div>
            <div class="form-group">
                <label>Fingerprint Data</label>
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <button onclick="scanFingerprintForRegistration()" class="btn-primary" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">üì° Scan Fingerprint</button>
                    <button onclick="connectFingerprintSensor()" class="btn-secondary" style="padding: 12px; background: #e0e0e0; color: #000; border: 2px solid #000; border-radius: 8px; font-weight: 600; cursor: pointer;">üîå Connect Sensor</button>
                </div>
                <textarea id="fingerprintData" rows="5" placeholder="Fingerprint data will appear here after scanning, or paste manually..." style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0; font-family: monospace;"></textarea>
                <small style="color: #666;">Note: Click "Scan Fingerprint" to use real fingerprint sensor, or manually enter fingerprint data. Each fingerprint must be unique.</small>
            </div>
            <div id="fingerprintStatus" style="margin: 15px 0; padding: 10px; border-radius: 5px; display: none;"></div>
            <div class="form-actions">
                <button onclick="registerFingerprint()" class="btn-primary">Register Fingerprint</button>
                <button onclick="closeFingerprintModal()" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Check-In Modal -->
    <div id="checkInModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="closeCheckInModal()">&times;</span>
            <h2 style="color: #4caf50; text-align: center; margin-bottom: 10px;">‚úÖ Check-In</h2>
            
            <!-- Beautiful Fingerprint Icon -->
            <div class="fingerprint-icon" style="background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);">
                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                    <path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zm0 448c-105.9 0-192-86.1-192-192S150.1 64 256 64s192 86.1 192 192-86.1 192-192 192zm0-320c-70.7 0-128 57.3-128 128s57.3 128 128 128 128-57.3 128-128-57.3-128-128-128zm0 192c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64z"/>
                    <circle cx="256" cy="256" r="32" fill="white" opacity="0.3"/>
                    <path d="M192 192c0-17.7 14.3-32 32-32s32 14.3 32 32-14.3 32-32 32-32-14.3-32-32zm128 0c0-17.7 14.3-32 32-32s32 14.3 32 32-14.3 32-32 32-32-14.3-32-32z" fill="white" opacity="0.5"/>
                </svg>
            </div>
            
            <div class="form-group">
                <label style="font-size: 16px; font-weight: 600; margin-bottom: 10px; display: block; text-align: center;">Enter Employee ID</label>
                <input type="text" id="checkInInput" placeholder="Enter Employee ID" autofocus
                       style="width: 100%; padding: 15px; border-radius: 10px; border: 3px solid #4caf50; font-size: 18px; text-align: center; letter-spacing: 2px;"
                       onkeypress="if(event.key === 'Enter') processCheckIn()">
            </div>
            <div id="checkInStatus" style="margin: 15px 0; padding: 15px; border-radius: 10px; display: none;"></div>
            <div class="form-actions" style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="processCheckIn()" class="btn-primary" style="flex: 1; padding: 15px; font-size: 16px; font-weight: 600; background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);">‚úÖ Check-In</button>
                <button onclick="closeCheckInModal()" class="btn-secondary" style="flex: 1; padding: 15px; font-size: 16px;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Check-Out Modal -->
    <div id="checkOutModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="closeCheckOutModal()">&times;</span>
            <h2 style="color: #ff9800; text-align: center; margin-bottom: 10px;">üö™ Check-Out</h2>
            
            <!-- Beautiful Fingerprint Icon -->
            <div class="fingerprint-icon" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);">
                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                    <path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zm0 448c-105.9 0-192-86.1-192-192S150.1 64 256 64s192 86.1 192 192-86.1 192-192 192zm0-320c-70.7 0-128 57.3-128 128s57.3 128 128 128 128-57.3 128-128-57.3-128-128-128zm0 192c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64z"/>
                    <circle cx="256" cy="256" r="32" fill="white" opacity="0.3"/>
                    <path d="M192 192c0-17.7 14.3-32 32-32s32 14.3 32 32-14.3 32-32 32-32-14.3-32-32zm128 0c0-17.7 14.3-32 32-32s32 14.3 32 32-14.3 32-32 32-32-14.3-32-32z" fill="white" opacity="0.5"/>
                </svg>
            </div>
            
            <div class="form-group">
                <label style="font-size: 16px; font-weight: 600; margin-bottom: 10px; display: block; text-align: center;">Enter Employee ID</label>
                <input type="text" id="checkOutInput" placeholder="Enter Employee ID" autofocus
                       style="width: 100%; padding: 15px; border-radius: 10px; border: 3px solid #ff9800; font-size: 18px; text-align: center; letter-spacing: 2px;"
                       onkeypress="if(event.key === 'Enter') processCheckOut()">
            </div>
            <div id="checkOutStatus" style="margin: 15px 0; padding: 15px; border-radius: 10px; display: none;"></div>
            <div class="form-actions" style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="processCheckOut()" class="btn-primary" style="flex: 1; padding: 15px; font-size: 16px; font-weight: 600; background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);">üö™ Check-Out</button>
                <button onclick="closeCheckOutModal()" class="btn-secondary" style="flex: 1; padding: 15px; font-size: 16px;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Leave Modal -->
    <div id="leaveModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLeaveModal()">&times;</span>
            <h2 style="color: #ff8c00;">Apply Leave</h2>
            <form id="leaveForm">
                <input type="hidden" id="leaveId">
                <div class="form-group">
                    <label>Employee *</label>
                    <select id="leaveEmployeeId" required>
                        <option value="">Select Employee</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Leave Type *</label>
                    <select id="leaveType" required>
                        <option value="">Select Type</option>
                        <option value="sick">Sick Leave</option>
                        <option value="casual">Casual Leave</option>
                        <option value="annual">Annual Leave</option>
                        <option value="emergency">Emergency Leave</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Start Date *</label>
                        <input type="date" id="leaveStartDate" required onchange="calculateLeaveDays()">
                    </div>
                    <div class="form-group">
                        <label>End Date *</label>
                        <input type="date" id="leaveEndDate" required onchange="calculateLeaveDays()">
                    </div>
                </div>
                <div class="form-group">
                    <label>Total Days</label>
                    <input type="number" id="leaveTotalDays" readonly>
                </div>
                <div class="form-group">
                    <label>Reason</label>
                    <textarea id="leaveReason" rows="3" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Apply Leave</button>
                    <button type="button" onclick="closeLeaveModal()" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Short Leave Modal -->
    <div id="shortLeaveModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeShortLeaveModal()">&times;</span>
            <h2 style="color: #ff8c00;">Apply Short Leave</h2>
            <form id="shortLeaveForm">
                <input type="hidden" id="shortLeaveId">
                <div class="form-group">
                    <label>Employee *</label>
                    <select id="shortLeaveEmployeeId" required>
                        <option value="">Select Employee</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Date *</label>
                        <input type="date" id="shortLeaveDate" required>
                    </div>
                    <div class="form-group">
                        <label>Leave Time *</label>
                        <input type="time" id="shortLeaveTime" required onchange="calculateShortLeaveDuration()">
                    </div>
                </div>
                <div class="form-group">
                    <label>Return Time</label>
                    <input type="time" id="shortLeaveReturnTime" onchange="calculateShortLeaveDuration()">
                </div>
                <div class="form-group">
                    <label>Duration (Hours)</label>
                    <input type="number" step="0.5" id="shortLeaveDuration" readonly>
                </div>
                <div class="form-group">
                    <label>Reason</label>
                    <textarea id="shortLeaveReason" rows="3" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #e0e0e0;"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Apply Short Leave</button>
                    <button type="button" onclick="closeShortLeaveModal()" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
      // Set API URL directly (FREE solution - no Netlify Pro needed)
      window.API_BASE_URL = "https://khandevhub.vercel.app";
    </script>
    <script src="config.js"></script>
    <script src="auth.js"></script>
    <script src="mobile-menu.js"></script>
    <script src="fingerprint-sensor.js"></script>
    <script src="employees.js"></script>
    <script>
        // Show sellers link for admin
        window.addEventListener('DOMContentLoaded', () => {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            const sellersLink = document.getElementById('sellersLink');
            if (sellersLink && user.role === 'admin') {
                sellersLink.style.display = 'block';
            }
        });
    </script>
</body>
</html>

